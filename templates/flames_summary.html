<style>
  .summary-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 2rem;
    margin-bottom: 2rem;
  }

  .left-panel {
    flex: 1;
    min-width: 280px;
    max-width: 400px;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .right-panel {
    flex: 2;
    min-width: 400px;
  }

  .summary-block,
  .pareto-block {
    background-color: #fff;
    padding: 1rem;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  }

  .summary-block ul {
    list-style: none;
    padding-left: 0;
  }

  .summary-block li {
    margin-bottom: 0.5rem;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 15px;
    background-color: white;
  }

  th, td {
    border: 1px solid #ccc;
    padding: 6px 10px;
    text-align: center;
  }

  th {
    background-color: #f0f0f0;
    font-weight: 600;
  }

  .full-width-section {
    margin-top: 2rem;
  }
</style>

<!-- ğŸ”¹ ìƒë‹¨ ìš”ì•½ -->
<div class="summary-grid">
  <!-- ğŸ”¸ ì™¼ìª½: ì „ì²´ ìœ ì € í†µê³„ + íŒŒë ˆí†  -->
  <div class="left-panel">
    <div class="summary-block">
      <h3>ğŸ“Š ì „ì²´ ìœ ì € í†µê³„</h3>
      <ul>
        <li>í˜„ í•˜ìŠ¤íƒ€í‹° ìˆ˜: {{ overall.total_users }}</li>
        <li>ì´ ëˆ„ì  ì ‘ì† ì‹œê°„: {{ overall.total_all_minutes }}ë¶„</li>
        <li>ìœ ì €ë‹¹ í‰ê·  ì ‘ì† ì‹œê°„: {{ overall.avg_minutes_per_user }}ë¶„</li>
        <li>ê°€ì¥ í™œë°œí•œ ìœ ì €: <strong>{{ overall.max_user.username }}</strong> ({{ overall.max_user.total_minutes }}ë¶„)</li>
        <li>ì ‘ì† ì‹œê°„ í¸ì°¨ (í‘œì¤€í¸ì°¨): {{ overall.std_dev }}ë¶„</li>
      </ul>
    </div>

    <div class="pareto-block">
      <div id="pareto-container">
        <p>ë¶ˆê· í˜• ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
      </div>
    </div>
  </div>

  <!-- ğŸ”¸ ì˜¤ë¥¸ìª½: ì „ì²´ ìœ ì € í™œë™ ìš”ì•½ -->
  <div class="right-panel">
    <h3>ğŸ§‘â€ğŸ’» ì „ì²´ ìœ ì € í™œë™ ìš”ì•½</h3>
    <table>
      <thead>
        <tr>
          <th>ìœ ì €ëª…</th>
          <th>ì´ ì‹œê°„</th>
          <th>ì ‘ì† íšŸìˆ˜</th>
          <th>í‰ê·  ì‹œê°„</th>
          <th>í™œë™ ì¼ìˆ˜</th>
          <th>ì¼ë³„ í‰ê· </th>
        </tr>
      </thead>
      <tbody>
        {% for user in summary %}
        <tr>
          <td><a href="{{ url_for('flames', ember_id=user.user_id) }}">{{ user.username }}</a></td>
          <td>{{ user.total_minutes }}</td>
          <td>{{ user.entry_count }}</td>
          <td>{{ user.avg_minutes }}</td>
          <td>{{ user.active_days }}</td>
          <td>{{ user.avg_entries }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<!-- ğŸ”¹ í•˜ë‹¨ ë¶„ì„ -->
<div class="full-width-section" id="heatmap-container">
  <h3>ìµœê·¼ 7ì¼ê°„ í•˜ìŠ¤íƒ€í‹° í™œë™ íˆíŠ¸ë§µ</h3>
  <p>íˆíŠ¸ë§µì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
</div>

<div class="full-width-section" id="focus-container">
  <h3>ğŸŸ£ í™œë™ ì§‘ì¤‘ë„ ë¶„ì„</h3>
  <p>í™œë™ ì§‘ì¤‘ë„ ë¶„ì„ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
</div>

<!-- ğŸ”¸ íˆíŠ¸ë§µ, ì§‘ì¤‘ë„, íŒŒë ˆí†  ë¶ˆëŸ¬ì˜¤ê¸° -->
<script>
  window.addEventListener("DOMContentLoaded", () => {
    fetch("/flames/pareto")
      .then(res => res.text())
      .then(html => {
        document.getElementById("pareto-container").innerHTML = html;
      });

    fetch("/flames/heatmap")
      .then(res => res.text())
      .then(html => {
        document.getElementById("heatmap-container").innerHTML = html;
      });

    fetch("/flames/focus?period=7")
      .then(res => res.text())
      .then(html => {
        document.getElementById("focus-container").innerHTML = html;
      });
  });
</script>

<link rel="stylesheet" href="{{ url_for('static', filename='pareto.css') }}">
<a href="{{ url_for('home') }}">í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
